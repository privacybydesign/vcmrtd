"use strict";(self.webpackChunkdmrtd_docs=self.webpackChunkdmrtd_docs||[]).push([[6229],{8025:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"library/api","title":"API reference","description":"This document describes the HTTP API exposed by the Go Passport Issuer backend.","source":"@site/docs/library/api.md","sourceDirName":"library","slug":"/library/api","permalink":"/dmrtd/library/api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Passport Issuance Flows","permalink":"/dmrtd/library/flow"},"next":{"title":"Active Authentication (AA)","permalink":"/dmrtd/info/aa"}}');var r=s(4848),a=s(8453);const t={},d="API reference",o={},c=[{value:"Health Check",id:"health-check",level:2},{value:"Start Passport Validation",id:"start-passport-validation",level:2},{value:"Verify and Issue Passport Credential",id:"verify-and-issue-passport-credential",level:2},{value:"Mobile Application Association Files",id:"mobile-application-association-files",level:2},{value:"Android",id:"android",level:3},{value:"iOS",id:"ios",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-reference",children:"API reference"})}),"\n",(0,r.jsx)(n.p,{children:"This document describes the HTTP API exposed by the Go Passport Issuer backend."}),"\n",(0,r.jsx)(n.h2,{id:"health-check",children:"Health Check"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"GET /api/health"})]}),"\n",(0,r.jsx)(n.p,{children:"Returns a simple status object that can be used by load balancers or monitoring to verify that the service is running."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "ok": true\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"start-passport-validation",children:"Start Passport Validation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /api/start-validation"})]}),"\n",(0,r.jsx)(n.p,{children:"Starts a new passport validation session. The body of the request is empty."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "session_id": "4f3c2a1b5e6d7c8f9a0b1c2d3e4f5a6b",\r\n  "nonce": "d4e5f6a7"\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"session_id"})," is a unique identifier for the validation session and ",(0,r.jsx)(n.code,{children:"nonce"})," is an 8 byte hex string that must be echoed back in the next step."]}),"\n",(0,r.jsx)(n.h2,{id:"verify-and-issue-passport-credential",children:"Verify and Issue Passport Credential"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"POST /api/verify-and-issue"})]}),"\n",(0,r.jsxs)(n.p,{children:["Submits the e-passport data for validation. The request body must conform to the ",(0,r.jsx)(n.code,{children:"PassportValidationRequest"})," schema."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request body"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "session_id": "4f3c2a1b5e6d7c8f9a0b1c2d3e4f5a6b",\r\n  "nonce": "d4e5f6a7",\r\n  "data_groups": {\r\n    "DG1": "<Base64 encoded DG1 data>",\r\n    "DG2": "<Base64 encoded DG2 data>"\r\n  },\r\n  "ef_sod": "<Base64 encoded EF.SOD file>",\r\n  "aa_signature": "<Base64 encoded active authentication signature>"\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"data_groups"})," is a mapping of ICAO data group numbers to their base64 encoded contents. ",(0,r.jsx)(n.code,{children:"ef_sod"})," contains the base64 encoded Security Object Document file. ",(0,r.jsx)(n.code,{children:"aa_signature"})," is optional and carries the base64 encoded active authentication signature when active authentication is performed."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "jwt": "<JWT containing the passport credential>",\r\n  "irma_server_url": "https://is.staging.yivi.app"\r\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The returned JWT can be submitted to the IRMA server referenced by ",(0,r.jsx)(n.code,{children:"irma_server_url"})," to complete issuance."]}),"\n",(0,r.jsx)(n.h2,{id:"mobile-application-association-files",children:"Mobile Application Association Files"}),"\n",(0,r.jsx)(n.p,{children:"The server also exposes endpoints that return association files used by mobile operating systems to link the web service to native applications."}),"\n",(0,r.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Endpoint:"})," ",(0,r.jsx)(n.code,{children:"GET /.well-known/assetlinks.json"})]}),"\n",(0,r.jsxs)(n.p,{children:["Returns an ",(0,r.jsx)(n.a,{href:"https://developer.android.com/training/app-links/verify-site-associations",children:"Android Digital Asset Links"})," declaration."]}),"\n",(0,r.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Endpoints:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /.well-known/apple-app-site-association"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /apple-app-site-association"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Both endpoints return the ",(0,r.jsx)(n.a,{href:"https://developer.apple.com/documentation/xcode/supporting-associated-domains",children:"Apple App Site Association"})," file."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);