"use strict";(self.webpackChunkdmrtd_docs=self.webpackChunkdmrtd_docs||[]).push([[7519],{6548:(r,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>p,default:()=>u,frontMatter:()=>n,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"library/flow","title":"Sequence diagram","description":"","source":"@site/docs/library/flow.md","sourceDirName":"library","slug":"/library/flow","permalink":"/vcmrtd/library/flow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Passport Model Support Table","permalink":"/vcmrtd/library/support"},"next":{"title":"Active Authentication (AA)","permalink":"/vcmrtd/info/aa"}}');var t=s(4848),i=s(8453);const n={},p="Sequence diagram",o={},c=[];function d(r){const e={h1:"h1",header:"header",mermaid:"mermaid",...(0,i.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"sequence-diagram",children:"Sequence diagram"})}),"\n",(0,t.jsx)(e.mermaid,{value:'sequenceDiagram\r\n    participant User\r\n    participant YiviApp\r\n    participant Passport\r\n    participant PassportIssuer\r\n    participant IrmaServer\r\n\r\n    User->>YiviApp: Open Yivi App\r\n    activate YiviApp\r\n    User->>YiviApp: Select "Start Passport Issuance"\r\n    YiviApp->>PassportIssuer: start-validation\r\n    activate PassportIssuer\r\n    PassportIssuer--\x3e>YiviApp: sessionId, nonce\r\n    deactivate PassportIssuer\r\n\r\n    alt MRZ scanned via camera\r\n        YiviApp->>User: Show MRZ scanner\r\n        User->>Passport: Show passport data page\r\n        activate Passport\r\n        YiviApp->>Passport: OCR MRZ from passport\r\n        Passport--\x3e>YiviApp: MRZ Data\r\n        deactivate Passport\r\n    else Manual entry\r\n        YiviApp->>User: Request manual MRZ input\r\n        User->>YiviApp: Enter date of birth, expiry, doc number\r\n    end\r\n\r\n    YiviApp->>User: Request NFC to be enabled\r\n    User->>Passport: Tap passport on phone\r\n    activate Passport\r\n\r\n    YiviApp->>Passport: Perform BAC or PACE\r\n    Passport--\x3e>YiviApp: Authenticated\r\n    YiviApp->>Passport: Read Data Groups\r\n    Passport--\x3e>YiviApp: DataGroups\r\n    YiviApp->>Passport: Read EF.SOD\r\n    Passport--\x3e>YiviApp: EF.SOD\r\n    YiviApp->>Passport: Perform Active Auth (if supported, with nonce)\r\n    Passport--\x3e>YiviApp: ActiveAuth signature\r\n    deactivate Passport\r\n\r\n    YiviApp->>PassportIssuer: Send sessionId, dataGroups, EF.SOD, activeAuthSig\r\n    activate PassportIssuer\r\n    PassportIssuer->>PassportIssuer: Perform Passive Auth (CSCA check)\r\n    PassportIssuer->>PassportIssuer: Validate Active Auth (nonce/sessionId)\r\n\r\n    PassportIssuer->>YiviApp: Return IRMA issuance request (signed JWT, IrmaServer info)\r\n    deactivate PassportIssuer\r\n\r\n    YiviApp->>IrmaServer: Start issuance session with JWT\r\n    activate IrmaServer\r\n    IrmaServer--\x3e>YiviApp: Return issued credential\r\n    deactivate IrmaServer\r\n\r\n    YiviApp--\x3e>User: Credential received\r\n    deactivate YiviApp\r\n\r\n'})]})}function u(r={}){const{wrapper:e}={...(0,i.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(d,{...r})}):d(r)}}}]);