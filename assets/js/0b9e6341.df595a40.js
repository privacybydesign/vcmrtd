"use strict";(self.webpackChunkdmrtd_docs=self.webpackChunkdmrtd_docs||[]).push([[7519],{6548:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>p,default:()=>u,frontMatter:()=>n,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"library/flow","title":"Sequence diagram","description":"","source":"@site/docs/library/flow.md","sourceDirName":"library","slug":"/library/flow","permalink":"/dmrtd/library/flow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Passport Model Support Table","permalink":"/dmrtd/library/support"},"next":{"title":"Active Authentication (AA)","permalink":"/dmrtd/info/aa"}}');var t=r(4848),i=r(8453);const n={},p="Sequence diagram",o={},c=[];function d(e){const s={h1:"h1",header:"header",mermaid:"mermaid",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sequence-diagram",children:"Sequence diagram"})}),"\n",(0,t.jsx)(s.mermaid,{value:'sequenceDiagram\n    participant User\n    participant YiviApp\n    participant Passport\n    participant PassportIssuer\n    participant IrmaServer\n\n    User->>YiviApp: Open Yivi App\n    activate YiviApp\n    User->>YiviApp: Select "Start Passport Issuance"\n    YiviApp->>PassportIssuer: start-validation\n    activate PassportIssuer\n    PassportIssuer--\x3e>YiviApp: sessionId, nonce\n    deactivate PassportIssuer\n\n    alt MRZ scanned via camera\n        YiviApp->>User: Show MRZ scanner\n        User->>Passport: Show passport data page\n        activate Passport\n        YiviApp->>Passport: OCR MRZ from passport\n        Passport--\x3e>YiviApp: MRZ Data\n        deactivate Passport\n    else Manual entry\n        YiviApp->>User: Request manual MRZ input\n        User->>YiviApp: Enter date of birth, expiry, doc number\n    end\n\n    YiviApp->>User: Request NFC to be enabled\n    User->>Passport: Tap passport on phone\n    activate Passport\n\n    YiviApp->>Passport: Perform BAC or PACE\n    Passport--\x3e>YiviApp: Authenticated\n    YiviApp->>Passport: Read Data Groups\n    Passport--\x3e>YiviApp: DataGroups\n    YiviApp->>Passport: Read EF.SOD\n    Passport--\x3e>YiviApp: EF.SOD\n    YiviApp->>Passport: Perform Active Auth (if supported, with nonce)\n    Passport--\x3e>YiviApp: ActiveAuth signature\n    deactivate Passport\n\n    YiviApp->>PassportIssuer: Send sessionId, dataGroups, EF.SOD, activeAuthSig\n    activate PassportIssuer\n    PassportIssuer->>PassportIssuer: Perform Passive Auth (CSCA check)\n    PassportIssuer->>PassportIssuer: Validate Active Auth (nonce/sessionId)\n\n    PassportIssuer->>YiviApp: Return IRMA issuance request (signed JWT, IrmaServer info)\n    deactivate PassportIssuer\n\n    YiviApp->>IrmaServer: Start issuance session with JWT\n    activate IrmaServer\n    IrmaServer--\x3e>YiviApp: Return issued credential\n    deactivate IrmaServer\n\n    YiviApp--\x3e>User: Credential received\n    deactivate YiviApp\n\n'})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);